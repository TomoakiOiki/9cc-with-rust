# 座学
- ちょい古いが良さげな資料を見つけたので復習兼勉強
- 以下、画像の出典はすべてスライドから。
- [Rust速習会1](https://speakerdeck.com/qnighy/rustsu-xi-hui-1)
  - rustとは?
    - 安全性、並行性、速度を併せ持ったプログラミング言語
      - 安全性：メモリ破壊、未定義動作を網羅的に防止
      - 並行性：正しさが証明された並列プリミティブ
        - 並列プリミティブ：その処理内で完結し、並行して実行してもお互いに影響を及ぼさない処理の単位
      - 速度：C++相当
  - 周辺ツール
    - 基本cargoがあればOK
      - 内部にコンパイラ、フォーマッタ、linter、ドキュメント生成など開発時に必要な殆どのツールが含まれている
  - 互換性を保つ工夫
    - semver
      - セマンティックバージョニング
        - 意味のあるバージョンの付け方
      - これが言語のエコシステム内で重視されているのは利用者目線でかなり良い
        - 唐突な破壊的変更等をバージョンの指定方法で回避できるため
        - 破壊的変更の有無をバージョンから暗黙的に把握できるため
    - stable compiler, nightly compiler
      - 互換性を保証するコンパイラと、非互換性の代わりに最新機能を試せるコンパイラ
    - [crater](https://github.com/rust-lang/crater)
      - すべてのライブラリをコンパイルして互換性の見落としを防ぐ
    - warning cycle
      - 破壊的変更が必要な場合は猶予期間を持つ
    - [This week in Rust](https://this-week-in-rust.org/)
      - 人気ツールのバージョン情報、コンパイラの開発状況などの情報を毎週知れる
  - 知らんかったオプション
    - `cargo check`: コンパイルチェック、buildより高速
    - `cargo build --release`: リリースビルド、高速なバイナリが生成される
- [Rust速習会2](https://speakerdeck.com/qnighy/rustsu-xi-hui-2)
  - Rustプログラミングの傾向
    - 書きやすさ
      - コードは長い
      - コンパイラのエラー駆動で開発できる
    - 読みやすさ
      - 長い
      - コードの相互作用はわかりやすいため、追跡しやすい
  - Rustのコスト感
    - 実行時コストが掛かるものがオプトインになっている傾向
      - シンプルなところからオプトインで属性を追加していく
  - 型合わせ
    - Option/Resultと和解せよ
      - ![image](https://user-images.githubusercontent.com/76932511/161430011-6a67c7af-2753-4ab7-88a2-45b61ecb3751.png)
    - 参照型
      - `&T, &mut T`は独立した型
        - `Option<&'a T>`と`&'a Option<T>`は別
      - `&T, &mut T,T`で共通してるAPIは多い
      - ![image](https://user-images.githubusercontent.com/76932511/161430331-eef4b4f4-1a62-4165-8689-e0ef49c74650.png)
      - 文字列版
        - ![image](https://user-images.githubusercontent.com/76932511/161430365-9c571e59-9be9-4c16-aa16-2ff4a3f4cff0.png)
      - 配列版
        - ![image](https://user-images.githubusercontent.com/76932511/161430410-a60c0e01-9084-4265-b1a1-83f5f9962cd9.png)
      - `for x in v.iter(){}`の`x`には参照が渡ってくる
        - vの型が巨大すぎるorコピー不可なものでも操作できる
        - 要素として受け取るには以下などする
          - `v.iter().cloned()`
          - `for &x in v.iter()`
          - `for x in v.train()`
  - 所有権
    - Rustの「コピー」、「ムーブ」は単純コピー
      - 移動先のメモリに全く同じ値を書き込む
    - cloneはディープコピー
      - Arc/Rcはシャローコピー
      - ファイルハンドラ系はそのままcloneできない
        - Arc/Rcで包めばclone自体は可能（シャロー）
  - 途中まで！
    - ライフタイムと排他制御から次回は開始
# 実装
- トーカナイザーの比較演算子対応
  - 2文字にしか対応してない
# 感想
- 座学ばっかりで疲れた
- 速習会4まであるのでまたどこかで読む
