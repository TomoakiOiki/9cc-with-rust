# 座学
#### step6 単項プラスと単項マイナス
- `+3 * -2 / -1`みたいな記法に対応する
- 文法としては下記
  - どうやって考えるのか？
    - 優先度としてはカッコよりは低く、四則演算よりは高いみたいに考えて、木構造でのレイヤー？を考える
```
expr    = mul ("+" mul | "-" mul)*
mul     = unary ("*" unary | "/" unary)*
unary   = ("+" | "-")? primary
primary = num | "(" expr ")"
```
![image](https://user-images.githubusercontent.com/76932511/161383652-52d9ea56-fed0-4b6d-9038-6635863b5610.png)
- 単項プラスっているのか？
  - オリジナルのCコンパイラにはなかったがあとから追加された
  - `i += 3`を`i =+ 3`をtypoした時に単項プラスがなければ文法エラーになるところが、`i = +3`という解釈になる

#### step7 比較演算子
- `<、<=、>、>=、==、!=`の実装
- 複雑そうに見えるが、普通に2項演算子
  - 必要な実装
    - トーカナイザーの変更
    - 文法の定義
    - アセンブリの生成
  - つまりこれまでの総復習
# 実装
- 単項プラスと単項マイナス
  - `-x`を`0-x`に置き換えたり、`+x`を`x`に置き換えるようにしている
- 比較演算子
  - 複数文字のトークンを扱う実装が必要になる
# 感想
- 出かけてたのもあって今日は少なめ
- だんだんコンパイラとして一般化されてきて楽しい
